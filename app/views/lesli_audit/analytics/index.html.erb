
<% @visitors = @visitors.reverse %>

<%= render(LesliView::Layout::Container.new("audit-analytics")) do %>
    <%= render(LesliView::Components::Header.new("Analytics")) %>

    <%= render(LesliView::Charts::Line.new(
        title:"Visitors",
        database_to_dataset: @visitors
    ))%>
    <br>
    <div class="columns">
        <div class="column">
            <%= render(LesliView::Elements::Table.new(
                columns: [{
                    label: "Controller",
                    field: "request_controller"
                },{
                    label:"Requests",
                    field:"requests"
                }],
                records: @requests
            )) %>
        </div>
    </div>

    <div class="columns">
        <div class="column">
            <%= render(LesliView::Charts::Bar.new(
                title: "Platforms",
                database_to_datasets: @platforms
            ))%>
        </div>
    </div>

    <div class="columns">
        <div class="column">
            <%= render(LesliView::Charts::Bar.new(
                title: "Browsers",
                database_to_datasets: @browsers
            ))%>
        </div>
    </div>
<% end %>
